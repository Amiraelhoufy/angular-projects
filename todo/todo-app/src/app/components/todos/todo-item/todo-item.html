<div class="container mt-5">
    <div class="col-md-4">
<h1>Todo Details:</h1>
<div>
  
@if(errorMessage){
 <app-alert
  [type]="'danger'"
  [message]="errorMessage">
</app-alert> 
}


@if(successMessage){
 <app-alert
  [type]="'success'"
  [message]="successMessage">
</app-alert> 
}

<!-- <div *ngIf="errorMessage" class="alert alert-danger"> {{ errorMessage }}</div> -->
<!-- <div *ngIf="successMessage" class="alert alert-success"> {{ successMessage }}</div> -->
</div>
<form (ngSubmit)="!todoForm.invalid && saveTodo()" #todoForm="ngForm">

  
<!-- <div *ngIf="todoForm.dirty && todoForm.invalid" class="alert alert-warning">Enter valid Values!</div> -->
<!-- <div *ngIf="todoForm.dirty && targetDate.invalid" class="alert alert-warning">Enter valid target date!</div> -->
<!-- <div *ngIf="todoForm.dirty && description.invalid" class="alert alert-warning">Enter at least 5 characters in description!</div> -->

@if (todoForm.dirty && targetDate.invalid) {
<app-alert
  [type]="'warning'"
  [message]="'Enter valid target date!'">
</app-alert>
}
  
@if (todoForm.dirty && description.invalid){
<app-alert
  [type]="'warning'"
  [message]="'Enter at least 5 characters in description!'">
</app-alert>
}


  <div class="container">
    <fieldset class="form-group"> 
        <label>Description:</label>
    <input type="text"
    [(ngModel)]="todo.description"
    class="form-control" 
    name="description"
    required="required"
    minlength="5"
    #description="ngModel">
    </fieldset>

    <fieldset class="form-group"> 
        <label>Target Date:</label>
    <input type="date"
    [ngModel]="todo.targetDate | date:'yyyy-MM-dd'" 
    (ngModelChange)="todo.targetDate = $event"
    class="form-control"
    name="targetDate"
    required="required"
    #targetDate="ngModel">
     <!-- 
    [min]="minDate"
     #targetDate="ngModel" -->
    </fieldset>
</div>
<div class="text-end justify-content-end">
  <button class="btn btn-outline-success" [routerLink]="'/todos'">Close</button>
  <button type="submit" class="btn btn-success">
    @if (isNew()) {
      <span>Add</span>
    }
    @else{
      <span>Update</span>
    }
  </button>    
</div>
</form>